  <div id="main">
    <div class="header">
      <h1>MQTT</h1>
    </div>

    <div class="content">
      <div class="pure-g">
        <div class="pure-u-1"><div class="card">
          <div class="form-horizontal">
            <input type="checkbox" name="slip-enable"/>
            <label>Enable SLIP on serial port</label>
          </div>
        </div></div>
      </div>
      <div class="pure-g">
        <div class="pure-u-1 pure-u-md-1-2">
          <div class="card">
            <h1>MQTT
              <div id="mqtt-spinner" class="spinner spinner-small"></div>
            </h1>
            <form action="#" id="mqtt-form" class="pure-form" hidden>
              <input type="checkbox" name="mqtt-enable"/>
              <label>Enable MQTT client</label>
              <br>
              <label>MQTT client state: </label>
              <b id="mqtt-state"></b>
              <br>
              <legend>MQTT server settings</legend>
              <div class="pure-form-stacked">
                <label>Server hostname or IP</label>
                <input type="text" name="mqtt-host"/>
                <label>Server port</label>
                <input type="text" name="mqtt-port"/>
                <label>Client ID</label>
                <input type="text" name="mqtt-client-id"/>
                <label>Client Timeout (seconds)</label>
                <input type="text" name="mqtt-timeout" />
                <label>Keep Alive Interval (seconds)</label>
                <input type="text" name="mqtt-keepalive" />
                <label>Username</label>
                <input type="text" name="mqtt-username"/>
                <label>Password</label>
                <input type="password" name="mqtt-password"/>
                
                <label>PWM channel 0 topic</label>
                <input type="text" name="mqtt-pwm0"/>
                <label>PWM channel 1 topic</label>
                <input type="text" name="mqtt-pwm1"/>
                <label>PWM channel 2 topic</label>
                <input type="text" name="mqtt-pwm2"/>
                
                <label>Topic for heater temperature control</label>
                <input type="text" name="mqtt-heater"/>
                
                <label>Topic for DHTxx temperature value</label>
                <input type="text" name="mqtt-temp"/>
                <label>Topic for DHTxx humidity value</label>
                <input type="text" name="mqtt-humi"/>
              </div>
              <button id="mqtt-button" type="submit" class="pure-button button-primary">
                Update server settings!
              </button>
            </form>
          </div>
        </div>
        <div class="pure-u-1 pure-u-md-1-2">
          <div class="card">
            <h1>Status reporting
              <div id="mqtt-status-spinner" class="spinner spinner-small"></div>
            </h1>
            <form action="#" id="mqtt-status-form" class="pure-form" hidden>
              <div class="form-horizontal">
                <input type="checkbox" name="mqtt-status-enable"/>
                <label>Enable status reporting via MQTT</label>
              </div>
              <br>
              <legend>Status reporting settings</legend>
              <div class="pure-form-stacked">
                <label>Topic</label>
                <input type="text" name="mqtt-status-topic"/>
                Message: <tt id="mqtt-status-value"></tt>
              </div>
              <button id="mqtt-status-button" type="submit" class="pure-button button-primary">
                Update status settings!
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="https://raw.githubusercontent.com/jeelabs/esp-link/v2.0.rc1/html/mqtt.js"></script>
<script type="text/javascript">onLoad(function(){fetchMqtt();bnd($("#mqtt-form"),"submit",changeMqtt);bnd($("#mqtt-status-form"),"submit",changeMqttStatus);});</script>
</body></html>
